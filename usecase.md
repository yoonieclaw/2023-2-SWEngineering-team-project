# UC 정리/관련function

# Use Case 분석

# UC1 사용자 기능

## 1.1 사전 조건

iTrust2 관리자가 iTrust2 의료 기록 시스템에 로그인되었습니다 [UC3](https://www.notion.so/uc3).

## 1.2 주 흐름

관리자는 사용자 생성 [S1] 또는 사용자 삭제 [S2] 옵션을 선택합니다. 성공 메시지가 표시되고 해당 작업이 로그에 기록됩니다.

## 1.3 하위 흐름

- [S1]: 관리자는 사용자 이름, 암호, 암호 확인, 역할 및 사용자가 시스템에서 활성화되었는지 (또는 활성화)를 입력합니다. 관리자는 사용자를 추가하기 위한 버튼을 누릅니다 [E1][E2]. 사용자 이름은 사용자의 의료 식별 번호 (MID)로 사용됩니다. 가능한 역할은 다음과 같습니다:
  - 환자
  - 건강 관리 제공자 (HCP)
  - 안과 의료 제공자 (Optometrist HCP)
  - 안과 의사 HCP (Ophthalmologist HCP)
  - 관리자
  - 응급 응답자 (ER)
  - 실험실 기술자
- [S2]: 관리자는 가능한 사용자 목록에서 사용자를 선택하고 삭제를 확인한 다음 사용자를 삭제하기 위한 버튼을 누릅니다.

## 1.4 대체 흐름

- [E1] 시스템은 필요한 데이터 필드의 형식이 해당 섹션 1.6에서 지정된 것과 일치하지 않아서 수정하도록 관리자에게 요청합니다.
- [E2] 암호와 반복 암호는 일치해야 하며 일치하지 않으면 오류가 표시됩니다.

## 1.5 로깅

| 트랜잭션 코드 | 자세한 설명            | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | ---------------------- | ------------- | -------- | ------------- | --------------- |
| 100           | 새로운 사용자가 생성됨 | 관리자        | 사용자   | 생성          | 아니오          |
| 101           | 사용자 보기            | 관리자        | 사용자   | 보기          | 아니오          |
| 102           | 사용자 보기            | 관리자        | N/A      | 보기          | 아니오          |
| 103           | 사용자 삭제            | 관리자        | 사용자   | 삭제          | 아니오          |
| 104           | 사용자 업데이트        | 관리자        | 사용자   | 편집          | 아니오          |

## 1.6 데이터 형식

| 필드        | 형식                                              |     |
| ----------- | ------------------------------------------------- | --- |
| 사용자 이름 | 6자에서 20자 사이의 알파벳 문자 및 기호 - 또는 \_ |     |
| 암호        | 6자에서 20자 사이의 문자                          |     |
| 반복 암호   | 6자에서 20자 사이의 문자                          |     |

<aside>
💡 관련 function : models/enums/user.java

</aside>

# UC2 사용자 인증

## 2.1 사전 조건

iTrust2에서 사용자가 생성되었습니다 [UC1](https://www.notion.so/uc1).

## 2.2 주 흐름

사용자는 iTrust2 의료 기록 시스템에 로그인하기 위해 사용자 이름과 암호를 입력합니다 [E1]. 10분 이상 활동하지 않은 세션이 종료됩니다 [S1]. 인증에 성공하면 사용자는 역할에 따라 맞춤 홈 페이지로 이동됩니다. 인증 세션이 사용자가 로그아웃하거나 iTrust2 애플리케이션을 닫을 때 종료됩니다.

## 2.3 하위 흐름

- [S1] 전자 세션은 10분 이상 비활동 후에 종료되어야 합니다. 10분을 초과하는 비활동 기간 후에 인증이 재설정되도록 하십시오.

## 2.4 대체 흐름

- [E1] 사용자는 세 번 시도할 수 있습니다. 사용자 ID로 세 번의 실패한 시도가 있으면 해당 사용자 이름을 60분 동안 잠급니다. 동일한 IP 주소에서 제공된 여러 사용자 또는 존재하지 않는 사용자의 경우 마지막 6번의 로그인 시도가 실패하면 해당 IP 주소가 60분 동안 잠깁니다. 60분의 잠금 기간 이후 사용자는 3번의 시도를 더하고 IP 주소는 6번의 시도를 더합니다. [E2]
- [E2] 사용자 또는 IP 주소가 24시간 동안 3번 잠금 해제되면, 해당 사용자 또는 IP 주소는 시스템 관리자에 의해 다시 승인 될 때까지 시스템에서 금지됩니다.

## 2.5 로깅

| 트랜잭션 코드 | 자세한 설명 | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | ----------- | ------------- | -------- | ------------- | --------------- |
| 1             | 로그인 실패 | IP 주소       | N/A      | 기타          | 예              |
| 2             | 로그인 성공 | MID           | N/A      | 기타          | 예              |
| 3             | 로그아웃    | MID           | N/A      | 기타          | 예              |
| 4             | 사용자 잠금 | 시도한 사용자 | N/A      | 기타          | 예              |
| 5             | IP 잠금     | IP 주소       | N/A      | 기타          | 예              |
| 6             | 사용자 금지 | 시도한 사용자 | N/A      | 기타          | 예              |
| 7             | IP 금지     | IP 주소       | N/A      | 기타          | 예              |

## 2.6 데이터 형식

| 필드   | 형식                                                                                                                                                                                                                                                             |     |     |
| ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --- | --- |
| 시간   | YYYY-MM-DD HH:MM:SS                                                                                                                                                                                                                                              |     |     |
| IP     | 유효한 IPv4 또는 IPv6 주소. "X.X.X.X" 형식의 문자열로 표시되며 각 X는 0에서 255까지의 정수 (10 진법) 또는 "X:X:X:X:X:X:X:X" 형식의 문자열로 표시되며 각 X는 0000에서 FFFF까지의 16진수 번호이며 0x- 접두사가 없으며 필요한 경우 불필요한 0을 생략할 수 있습니다. |     |     |
| 사용자 | 시스템 내의 유효한 사용자                                                                                                                                                                                                                                        |     |     |

## 2.7 수용 시나리오

### 시나리오 1 :: 3번의 시도 후 사용자 잠금

HCP Shelly Vang은 iTrust2에 인증하려고 시도하지만 올바르지 않은 암호를 사용합니다. 메시지가 그녀의 실수를 알립니다. 그녀는 2번 더 시도한 후 시스템에서 잠금이 해제되었다는 메시지가 나타납니다. 1시간 후, 그녀는 올바른 자격 증명을 사용하여 다시 로그인을 시도하고 성공적으로 로그인합니다.

### 시나리오 2 :: 3 번의 잠금 해제 후 사용자 금지

HCP Shelly Vang은 iTrust2에 인증하려고 시도하지만 올바르지 않은 암호를 사용합니다. 메시지가 그녀의 실수를 알립니다. 그녀는 2번 더 시도한 후 시스템에서 잠금이 해제되었다는 메시지가 나타납니다. 1시간 후, 그녀는 다시 입력을 반복하고 여전히 올바르지 않은 상태이며 계정이 시스템에서 금지되었다는 메시지가 나타납니다. 관리자에게 연락하여 계정을 다시 활성화해야 합니다.

### 시나리오 3 :: 6 번의 시도 후 IP 잠금

HCP Shelly Vang은 iTrust2에 인증하려고 시도하지만 올바르지 않은 암호를 사용합니다. 메시지가 그녀의 실수를 알립니다. 그녀는 2번 더 시도한 후 시스템에서 잠금이 해제되었다는 메시지가 나타납니다. 동일한 기기에서 환자 Jim Bean이 승인을 시도하지만 올바르지 않은 암호를 사용합니다. 세 번째 시도 이후, IP 주소가 1시간 동안 차단되었음을 나

타내는 메시지가 표시됩니다. 1시간 후, Shelly Vang은 올바른 암호로 인증을 시도하고 성공합니다.

### 시나리오 4 :: 3 번의 잠금 해제 후 IP 금지

등록되지 않은 사용자가 iTrust에 로그인을 시도합니다. 6회의 실패한 시도 후 시스템은 그의 IP 주소가 1시간 동안 잠겨 있음을 알려줍니다. 1시간 후, 그는 다시 시도하고 6번의 시도 후에 잠겨 있다는 메시지가 표시됩니다. 1시간 후, 그는 다시 시도하고 시스템은 그의 IP가 금지되었음을 나타내는 메시지를 표시하며 관리자에게 연락하여 IP를 차단 해제해야 합니다.

<aside>
💡 관련 function: security/ log entry ~loginlockout.java , user.java, personal.java, patient.java

</aside>

# UC3 트랜잭션 로깅

의료 정보는 매우 개인적입니다. 환자 데이터의 기밀성과 무결성을 유지하는 것이 중요합니다. 외부인의 환자 데이터에 대한 부적절한 액세스(생성, 읽기, 업데이트, 삭제) 및 사용자에게 시스템 권한을 잘못 부여하는 경우 포렌식 수행에 필수적인 완전한 로그 파일이 필요합니다.

## 3.1 사전 조건

없음

## 3.2 주 흐름

정보를 생성,보기, 편집 또는 삭제하는 이벤트는 모두 로깅됩니다 [S1]. 로그인 실패, 유효한 인증 및 로그 아웃도 로깅됩니다 [S2].

## 3.3 하위 흐름

- [S1] 정보를 생성, 보기, 수정 또는 삭제하는 경우 다음 정보가 기록됩니다. 로그인한 사용자의 MID, 액세스되는 정보의 사용자의 적절한 보조 MID, 주어진 작업에 해당하는 트랜잭션 유형 및 현재 타임스탬프. 특정 사용 사례와 관련된 개별 감사 코드는 각 사용 사례 설명 내에서 제시됩니다. 하위 흐름 및 트랜잭션 값은 사용 사례를 기반으로 합니다. 예를 들어 100-199 범위 내의 모든 것은 UC1에 해당하며, 300-399 범위 내의 것은 UC3에 해당합니다. 예외는 인증 [S2]에 해당하는 경우입니다.
- [S2] 범위 1-99의 값은 어떤 사용 사례에도 존재하지 않는 시스템 전체와 관련된 로깅 이벤트입니다. 인증 [UC2]과 관련된 로깅도 이 범위에 포함됩니다. 잡다한 트랜잭션 코드 1-99는 아래 섹션 3.5에서 제시됩니다.

## 3.4 대체 흐름

없음

## 3.5 로깅

| 트랜잭션 코드 | 자세한 설명    | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | -------------- | ------------- | -------- | ------------- | --------------- |
| 1             | 로그인 실패    | IP 주소       | N/A      | 기타          | 예              |
| 2             | 로그인 성공    | MID           | N/A      | 기타          | 예              |
| 3             | 로그아웃       | MID           | N/A      | 기타          | 예              |
| 10            | 홈 페이지 보기 | IP 주소       | N/A      | 보기          | 아니오          |

<aside>
💡 관련 function : security.java

</aside>

# UC4 인구 통계

## 4.1 사전 조건

iTrust2 사용자가 iTrust2 의료 기록 시스템에 인증했습니다 [UC2](https://www.notion.so/uc2).

## 4.2 주 흐름

인구 통계 정보가 입력 및/또는 편집됩니다 [S1, S2, S3]. 사용자에게 성공 또는 실패 메시지가 표시되며 양식이 업데이트되어 사용자가 양식을 수정하거나 더 많은 정보를 추가할 수 있습니다.

## 4.3 하위 흐름

- [S1] 환자는 자신의 인구 통계 정보를 입력 또는 편집할 수 있습니다. 인구 통계 정보의 데이터 형식에 대한 세부 정보는 섹션 4.6에 나와 있습니다 [E1].
- [S2] HCP는 환자의 MID를 입력한 다음 인구 통계 정보를 입력 또는 편집해야 합니다 [E1].
- [S3] HCP는 섹션 4.6의 데이터 형식에 따라 자신의 인구 통계 정보를 입력 또는 편집할 수 있습니다 [E1].
- [S4] ER은 섹션 4.6의 데이터 형식에 따라 자신의 인구 통계 정보를 입력 또는 편집할 수 있습니다 [E1].
- [S5] Lab Tech는 섹션 4.6의 데이터 형식에 따라 자신의 인구 통계 정보를 입력 또는 편집할 수 있습니다 [E1].

## 4.4 대체 흐름

- [E1] 시스템은 환자 또는 HCP에게 필수 데이터 필드의 형식을 수정하도록 안내합니다. 해당 데이터 필드의 입력이 섹션 4.6에서 지정된 형식과 일치하지 않기 때문입니다.

## 4.5 로깅

| 트랜잭션 코드 | 자세한 설명                       | 로그인 된 MID                                | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | --------------------------------- | -------------------------------------------- | -------- | ------------- | --------------- |
| 400           | 사용자에 의해 인구 통계 정보 보기 | HCP 또는 환자 또는 Lab Tech 또는 응급 응답자 | 환자     | 보기          | 예              |
| 410           | 사용자에 의해 인구 통계 정보 편집 | HCP 또는 환자 또는 Lab Tech 또는 ER          | 환자     | 편집          | 예              |

## 4.6 데이터 형식

| 필드                 | 형식                                                         |
| -------------------- | ------------------------------------------------------------ |
| 이름                 | 최대 20 자의 알파벳 문자 및 기호 -, ', 및 공백               |
| 성                   | 최대 30 자의 알파벳 문자 및 기호 -, ', 및 공백               |
| 선호 이름            | 최대 30 자의 알파벳 문자 및 기호 -, ', 및 공백 (선택 사항)   |
| 어머니 (사용자 이름) | 최대 20 자의 알파벳 문자 및 시스템의 기존 사용자 (선택 사항) |
| 아버지 (사용자 이름) | 최대 20 자의 알파벳 문자 및 시스템의 기존 사용자 (선택 사항) |
| 이메일               | 최대 30 자의 알파벳 숫자 문자 및 기호 ., \_, 및 @            |
| 거리 주소 1          | 최대 50 자의 알파벳 숫자 문자 및 기호: . 및 공백             |
| 거리 주소 2          | 최대 50 자의 알파벳 숫자 문자 및 기호: . 및 공백 (선택 사항) |
| 도시                 | 최대 15 자의 알파벳 문자                                     |
| 주                   | 승인된 2 자리 주 약어                                        |
| 우편 번호            | 5 자리-4 자리 (나중 부분 - 4 자리 - 선택 사항)               |
| 전화                 | 3 자리-3 자리-4 자리                                         |
| 생년월일             | 형식: 2 자리 월/2 자리 일/4 자리 연도                        |
| 인종                 | 백인, 아프리카계 미국인, 히스패닉, 원주민 또는 태평          |

<aside>
💡 관련 function : [personal.java](http://personal.java) , state.java

</aside>

# UC5 병원

## 5.1 사전 조건

**관리자**가 iTrust2 의료 기록 시스템에 인증했습니다 ([UC2](https://www.notion.so/uc2)).

## 5.2 주 흐름

관리자는 iTrust2에서 병원을 추가 [S1] 또는 삭제 [S2]하기로 선택합니다.

## 5.3 하위 흐름

- [S1] 관리자는 다음과 같은 병원에 관한 정보를 입력하고, 추가 병원 버튼을 누르는 방식으로, 섹션 5.6의 데이터 형식에 준하는 병원에 관한 정보를 입력합니다.
  - 이름
  - 주소
  - 주
  - 우편 번호
- [S2] 관리자는 가능한 병원 목록에서 병원을 선택하고 삭제를 확인한 후 병원 삭제 버튼을 누릅니다.

## 5.4 대체 흐름

- [E1] 시스템은 관리자에게 필수 데이터 필드의 형식을 수정하도록 안내합니다. 해당 데이터 필드의 입력이 섹션 5.6에서 지정된 형식과 일치하지 않기 때문입니다.

## 5.5 로깅

| 트랜잭션 코드 | 자세한 설명  | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |     |
| ------------- | ------------ | ------------- | -------- | ------------- | --------------- | --- |
| 501           | 새 병원 생성 | Admin         | N/A      | 생성          | 아니오          |     |
| 502           | 병원 보기    | Admin         | N/A      | 보기          | 아니오          |     |
| 503           | 병원 편집    | Admin         | N/A      | 편집          | 아니오          |     |
| 504           | 병원 삭제    | Admin         | N/A      | 삭제          | 아니오          |     |

## 5.6 데이터 형식

| 필드        | 형식                                             |
| ----------- | ------------------------------------------------ |
| 이름        | 최대 20 자의 알파벳 문자 및 기호 -, ', 및 공백   |
| 거리 주소 1 | 최대 50 자의 알파벳 숫자 문자 및 기호: . 및 공백 |
| 주          | 50개 미국 주의 두 글자 약어                      |
| 우편 번호   | 5 자리-4 자리 (나중 부분 - 4 자리 - 선택 사항)   |

<aside>
💡 관련 function : hospital.java

</aside>

# UC6 예약

## 6.1 사전 조건

iTrust2 사용자가 iTrust2에서 인증했습니다 [UC2](https://www.notion.so/uc2).

## 6.2 주 흐름

환자는 HCP와의 예약을 요청할 수 있습니다 [S1]. 환자는 예약 요청을 보고 삭제할 수 있습니다 [S2].

HCP는 예약 요청을 볼 수 있고, 이를 승인 또는 거부할 수 있습니다 [S3]. HCP는 승인된 예정 예약을 볼 수 있습니다 [S4].

## 6.3 하위 흐름

- [S1] 환자는 예약 요청에 관한 정보를 입력하고 "요청 제출" 버튼을 누릅니다 [E1]. 메시지가 요청을 확인합니다.
  - HCP
  - 날짜
  - 시간
  - 코멘트
  - 유형
- [S2] 환자는 자신의 예약 요청을 볼 수 있습니다. 환자는 요청을 선택하고 요청을 삭제할 수 있습니다. 메시지가 요청을 확인합니다.
- [S3] HCP는 예약 요청을 볼 수 있습니다. HCP는 요청을 승인 또는 거부할 수 있습니다. 메시지가 작업을 확인합니다. 이후에는 해당 예약은 환자의 예약 요청 보기에서 더 이상 표시되지 않습니다.
- [S4] HCP는 예정된 예약을 볼 수 있습니다.

## 6.4 대체 흐름

- [E1] 시스템은 환자나 HCP에게 필수 데이터 필드의 형식을 수정하도록 안내합니다. 해당 데이터 필드의 입력이 섹션 6.6에서 지정된 형식과 일치하지 않기 때문입니다.

## 6.5 로깅

| 트랜잭션 코드 | 자세한 설명               | 로그인 된 MID | 보조 MID      | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | ------------------------- | ------------- | ------------- | ------------- | --------------- |
| 611           | 예정된 예약이 볼          | HCP 또는 환자 | 환자 또는 HCP | 보기          | 예              |
| 640           | 환자가 요청한 예약        | 환자          | HCP           | 생성          | 예              |
| 641           | 예약 요청 보기            | 환자          | HCP           | 보기          | 예              |
| 642           | 환자가 예약 요청 삭제     | 환자          | HCP           | 삭제          | 예              |
| 650           | HCP에 의해 예약 요청 승인 | HCP           | 환자          | 편집          | 예              |
| 651           | HCP에 의해 예약 요청 거부 | HCP           | 환자          | 편집          | 예              |
| 652           | 예약 요청이 업데이트 됨   | HCP           | 환자          | 편집          | 예              |

## 6.6 데이터 형식

| 필드   | 형식                                        |
| ------ | ------------------------------------------- |
| HCP    | 시스템의 HCP 사용자 이름                    |
| 날짜   | 2 자리 월/2 자리 일/4 자리 연도             |
| 시간   | 2 자리 시간:2 자리 분[공백][오전 또는 오후] |
| 코멘트 | 최대 50 문자                                |
| 유형   | 일반 건강 진단 중 하나                      |

<aside>
💡 관련 function : [Appointmentrequest.java](http://Appointmentrequest.java) , appointmentType.java

</aside>

# UC7 진료 기록

## 7.1 전제 조건

iTrust2 사용자가 iTrust2에서 인증했습니다 [UC2](https://www.notion.so/uc2).

## 7.2 주 흐름

환자는 기록된 진료 기록을 볼 수 있습니다 [S1].

HCP는 진료 기록을 기록할 수 있습니다 [S2] 및 진료에 대한 세부 정보를 제공할 수 있습니다 [S3].

## 7.3 하위 흐름

- [S1]: 환자는 진료 기록을 보기 위해 선택합니다. HCP가 진료 기록을 기록한 모든 정보를 볼 수 있습니다. 그러나 이 정보를 편집할 수는 없습니다.
- [S2]: HCP는 진료 기록을 기록하려고 선택합니다. 이때 사전 예약 여부, 진료에 대한 어떤 메모, 환자, 예약 유형, 환자가 진료를 받은 병원, 진료 날짜 및 시간 등에 대한 정보를 기록합니다. 그런 다음 양식을 작성하고 "진료 기록 제출" 버튼을 누릅니다 [E1]. 진료 기록이 올바르게 입력되었는지를 나타내는 메시지가 표시됩니다.
- [S3]: HCP는 진료 유형에 따라 진료 기록에 대한 추가 세부 정보를 제공합니다:
  - 일반 건강 진단
    - 기본 건강 측정 [(UC8)](https://www.notion.so/uc8)
  - [안과 진료](https://www.notion.so/uc21)
  - [안과 수술](https://www.notion.so/uc22)

## 7.4 대체 흐름

- [E1] 시스템은 HCP에게 필수 데이터 필드의 형식을 수정하도록 안내합니다. 입력된 데이터 필드의 형식이 진료 기록 데이터나 다른 수집된 데이터 [S3]에 지정된 형식과 일치하지 않기 때문입니다.

## 7.5 로깅

| 트랜잭션 코드 | 자세한 설명 | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | ----------- | ------------- | -------- | ------------- | --------------- |

## 7.6 데이터 형식

| 필드 | 형식                            |
| ---- | ------------------------------- |
| 메모 | 최대 500자                      |
| 날짜 | 2 자리 월/2 자리 일/4 자리 연도 |
| 시간 | 2 자리 시간:2 자리 분[공백]오전 |

<aside>
💡 관련 function : [diagnosis.java](http://diagnosis.java) (메모, 날짜, 시간) , office [visit.java](http://visit.java) ( 날짜 시간 등등)

</aside>

# UC8 Basic Health Metrics

## 8.1 Preconditions

HCP는 iTrust2 Medical Records 시스템의 등록된 사용자입니다 ([UC1](https://www.notion.so/uc1)). HCP는 iTrust2 Medical Records 시스템에서 자신을 인증했습니다 ([UC2](https://www.notion.so/uc2)). HCP는 환자를 위한 진료 기록을 문서화하기 시작했습니다 ([UC7](https://www.notion.so/uc7)).

## 8.2 주 흐름

HCP는 환자의 연령에 적합한 건강 지표를 입력합니다: 3세 미만 [S1], 3세 이상 12세 미만 [S2] 및 12세 이상 [S3]. 모든 연령은 환자의 출생일과 진료일 사이의 달력 연수로 계산됩니다. HCP는 기본 건강 지표를 편집할 수 있습니다. 진료 기록을 작성하거나 편집할 때, HCP는 적절한 정보를 입력하고 제출합니다. 성공 메시지가 표시되며 HCP는 저장된 정보를 볼 수 있습니다.

환자는 진료를 위해 기록된 기본 건강 지표를 볼 수 있습니다.

## 8.3 하위 흐름

- [S1] 환자가 달력 연수로 3세 미만인 경우, HCP는 키, 체중, 머리 둘레 및 가구 흡연 상태를 입력합니다 [S4][E1].
- [S2] 환자가 달력 연수로 3세 이상 12세 미만인 경우, HCP는 키, 체중, 혈압 및 가구 흡연 상태를 입력합니다 [S4][E1].
- [S3] 환자가 달력 연수로 12세 이상인 경우, HCP는 키, 체중, 혈압, 가구 흡연 상태 [S4], 환자 흡연 상태 [S5], 고밀도 지질 단백질 (HDL) 콜레스테롤, 저밀도 지질 단백질 (LDL) 콜레스테롤 및 중성 지방을 입력합니다 [E1].
- [S4] HCP는 가구 구성원의 흡연 상태를 지정하기 위해 다음 메뉴 옵션 중 하나를 선택합니다: 1 - 비흡연 가구, 2 - 실외 흡연자, 3 - 실내 흡연자.
- [S5] HCP는 환자의 흡연 상태를 지정하기 위해 다음 메뉴 옵션 중 하나를 선택합니다: 1 - 절대 흡연자 아님; 2 - 과거 흡연자; 3 - 현재 어떤 날 흡연자; 4 - 매일 흡연자; 5 - 흡연자, 현재 상태 알 수 없음; 9 - 흡연 여부 알 수 없음.

## 8.4 대체 흐름

- [E1] 올바른 데이터 형식과 일치하지 않는 항목에 대한 내용을 포함한 오류 메시지가 표시됩니다.

## 8.5 로깅

| 트랜잭션 코드 | 자세한 설명                                      | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | ------------------------------------------------ | ------------- | -------- | ------------- | --------------- |
| 800           | 기본 건강 지표 생성                              | HCP           | 환자     | 생성          | 예              |
| 801           | HCP가 기본 건강 지표를 볼 때                     | HCP           | 환자     | 보기          | 예              |
| 802           | HCP가 기본 건강 지표를 편집할 때                 | HCP           | 환자     | 편집          | 예              |
| 810           | 환자가 진료를 위해 기록된 기본 건강 지표를 볼 때 | 환자          | HCP      | 보기          | 예              |

## 8.6 데이터 형식

| 필드           | 형식                                                                                                                       |
| -------------- | -------------------------------------------------------------------------------------------------------------------------- |
| 키/길이        | 최대 3 자리 숫자 + 최대 1자리 십진수 (인치) 0보다 큰 값이어야 합니다.                                                      |
| 체중           | 최대 4자리 숫자 + 최대 1자리 십진수 (파운드) 0보다 큰 값이어야 합니다.                                                     |
| 머리 둘레      | 최대 3자리 숫자 + 최대 1자리 십진수 (인치) 0보다 큰 값이어야 합니다.                                                       |
| 혈압           | 수축기 (Systolic)가 상단 값입니다. 확장기 (Diastolic)가 하단 값입니다. 양쪽 모두 3자리 이하의 양의 정수여야 합니다. (mmHg) |
| 콜레스테롤     | HDL [0에서 90 사이의 정수], LDL [0에서 600 사이의 정수], 중성 지방 [100에서 600 사이의 정수] (mg/dL)                       |
| 가구 흡연 상태 | 1 - 비흡연 가구, 2 - 실외 흡연자, 3 - 실내                                                                                 |

<aside>
💡 관련 function : [basichealthMetrics.java](http://basichealthMetrics.java) , ( patientsmokingstatus.java)

</aside>

# UC9 Prescriptions

## 9.1 Preconditions

iTrust2 시스템에 HCP, 환자 및 관리자가 모두 등록되어 있습니다. iTrust2 사용자가 시스템에 로그인했습니다. HCP는 진료 기록 작성을 시작해야 합니다.

## 9.2 주 흐름

HCP는 진료 기록에 새로운 처방전을 추가합니다. HCP는 처방명을 목록에서 선택하고 다른 처방 정보를 입력합니다. 방문당 처방전을 0개 이상 추가할 수 있습니다.

환자는 현재 및 과거 처방에 대한 테이블과 각 처방에 대한 정보를 볼 수 있습니다.

관리자는 시스템 내 NDC 목록을 업데이트합니다. 사용자는 새 NDC를 추가하고 기존 NDC를 수정할 수 있습니다.

## 9.3 하위 흐름

- [S1] HCP는 처방명을 목록에서 선택합니다. 시스템에서 추적되지 않는 이름을 입력할 옵션이 없습니다.
- [S2] HCP는 처방량을 밀리그램 단위로 입력합니다.
- [S3] HCP는 처방의 시작 날짜를 입력합니다.
- [S4] HCP는 처방의 종료 날짜를 입력합니다.
- [S5] HCP는 처방 기간 동안 신청 가능한 갱신 횟수를 입력합니다.
- [S6] 환자는 현재 및 과거 처방에 관한 테이블을 볼 수 있습니다.
- [S7] 관리자는 새로운 약물을 추가할 옵션을 선택합니다. 관리자는 NDC, 이름 및 설명을 입력합니다.
- [S8] 관리자는 기존 약물을 편집할 옵션을 선택합니다. 관리자는 기존 정보를 수정하고 제출합니다.

## 9.4 대체 흐름

- [E1] HCP 또는 관리자가 유효하지 않은 데이터를 입력하면 오류 메시지가 표시됩니다.
- [E2] 환자가 현재 또는 과거 처방을 갖고 있지 않은 경우, 시스템은 오류 메시지를 표시합니다.

## 9.5 로깅

| 트랜잭션 코드 | 자세한 설명             | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | ----------------------- | ------------- | -------- | ------------- | --------------- |
| 900           | NDC 추가                | 관리자        | 없음     | 생성          | 아니요          |
| 901           | NDC 편집                | 관리자        | 없음     | 편집          | 아니요          |
| 902           | NDC 삭제                | 관리자        | 없음     | 삭제          | 아니요          |
| 903           | NDC 보기                | 관리자        | 없음     | 보기          | 아니요          |
| 910           | 처방전 생성             | HCP           | 환자     | 생성          | 예              |
| 911           | 처방전 수정             | HCP           | 환자     | 편집          | 예              |
| 912           | 처방전 삭제             | HCP           | 환자     | 삭제          | 예              |
| 913           | 처방 전체 보기          | 환자          | HCP      | 보기          | 예              |
| 914           | 환자가 처방을 보는 경우 | 환자          | 없음     | 보기          | 예              |

## 9.6 데이터 형식

### 약물

| 필드 | 형식                                                                |
| ---- | ------------------------------------------------------------------- |
| 이름 | 비어있지 않은 문자열, 최대 50자                                     |
| 코드 | 네 자릿수의 문자열, 하이픈, 네 자릿수, 하이픈 및 두 자릿수의 문자열 |
| 설명 | 최대 1024자                                                         |

### 처방전

| 필드 | 형식                   |
| ---- | ---------------------- |
| 약물 | NDC 코드에 대한 문자열 |
| 용량 | 양의 정수              |
| 시작 | 월 일, 년              |
| 종   |                        |

료 | 월 일, 년 |
| 갱신 | 양의 정수 |

## 9.7 승인 시나리오

### 시나리오 1 :: 진료 기록에 처방전 추가

HCP Shelly Vang은 iTrust2에 인증합니다. Dr. Vang은 2017년 12월 15일 Central Hospital에서 Jim Bean (1995년 4월 12일 출생)의 새로운 진료 기록을 문서화하기로 선택했습니다. Dr. Vang은 Jim에 대해 "Jim은 우울해 보입니다. 또한 더 많은 채소를 먹어야 합니다."라고 메모합니다. Dr. Vang은 Jim의 체중을 130.4 lbs, 키를 73.1 in, 혈압을 160/80 mmHg, 가구 흡연 상태를 "비흡연 가구", 환자 흡연 상태를 "절대 흡연자 아님", HDL을 50, LDL을 123, 그리고 중성 지방을 148로 입력합니다. Dr. Vang은 "새 처방전 입력"을 선택하고 목록에서 "Quetiane Fumarate - 61786-926-01"을 선택합니다. 그런 다음 용량으로 100 mg, 시작 날짜로 2017년 12월 15일, 종료 날짜로 2018년 12월 14일, 갱신 횟수로 12를 입력합니다. 그녀는 제출 버튼을 클릭하고 입력이 성공적으로 기록되었다는 메시지가 나타납니다.

### 시나리오 2 :: 처방전 보기

Jim Bean은 iTrust2에 인증합니다. 그는 "처방전 보기"를 클릭합니다. Jim은 현재 및 과거 처방에 대한 목록을 볼 수 있습니다. 테이블에는 다음 항목이 포함되어 있습니다. 약물: Quetiane Fumarate, 용량: 100 mg, 시작: 2017년 12월 15일, 종료: 2018년 12월 14일, 갱신: 12

### 시나리오 3 :: 새로운 처방전 추가

관리자 Al Minister는 iTrust2에 인증합니다. 그는 "새 NDC 추가"를 클릭합니다. 그는 NDC로 "1234-5678-90"을, 이름으로 "Test Product"을, 그리고 설명으로 "강력한 항균제"를 입력합니다. 그는 제출 버튼을 클릭합니다. 메시지가 표시되어 NDC가 성공적으로 기록되었음을 알립니다.

<aside>
💡 관련 function : drug.java, prescription.java

</aside>

# UC10 진단

## 10.1 Preconditions

iTrust2 사용자가 iTrust2 [[UC2](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc2)]에서 자격 증명을 인증했습니다.

HCP는 iTrust2 Medical Records 시스템의 등록 사용자입니다. HCP는 환자를 진달하고, 환자의 기본 건강 지표를 포함한 진료 기록 작성을 시작했습니다 [[UC7](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc7) 및 [UC8](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc8)].

## 10.2 Main Flow

HCP는 환자의 진료 기록에 진단을 기록하고 진단과 관련된 데이터를 제공할 수 있습니다 [S1]. 진료 기록을 생성하거나 편집하기 위해 HCP는 적절한 정보를 입력하고 제출합니다. 성공 메시지가 표시되며 HCP는 저장된 정보를 볼 수 있습니다.

환자는 현재 및 과거의 진단을 볼 수 있으며 진단과 관련된 데이터를 포함합니다 [S2].

관리자는 시스템의 진단 목록을 추가 [S3] 또는 삭제 [S4]하여 업데이트할 수 있습니다.

## 10.3 Sub-flows

- [S1]: HCP는 ICD-10 코드와 설명으로 레이블링된 진단 옵션 메뉴에서 올바른 진단을 선택합니다. 진단에 대한 다음 추가 정보를 입력합니다: 진료 날짜, 환자 진단을 진달한 HCP 및 노트가 포함됩니다. "진단 저장" 버튼을 누릅니다 [E1]. 진단이 올바르게 문서화되었는지를 보여주는 메시지가 표시됩니다.
- [S2]: 환자는 자신의 진단과 진단과 관련된 데이터를 볼 수 있습니다. 진단이나 진단과 관련된 데이터를 편집할 수 없습니다.
- [S3]: 관리자는 진단의 ICD-10 코드와 설명을 입력합니다. "진단 추가"를 누릅니다 [E1]. 진단이 올바르게 입력되었는지를 보여주는 메시지가 표시됩니다.
- [S4]: 관리자는 가능한 진단 목록에서 진단을 선택하고 삭제를 확인한 다음 삭제하려면 "진단 삭제"를 누릅니다.

## 10.4 대체 흐름

- [E1]: 올바른 데이터 형식을 준수하지 않는 항목에 대한 설명이 포함된 오류 메시지가 표시됩니다(10.6에 정의된대로).

## 10.5 로깅

| 트랜잭션 코드 | 자세한 설명                     | 로그인 된 MID | 보조 MID | 트랜잭션 유형 | 환자에게 표시됨 |
| ------------- | ------------------------------- | ------------- | -------- | ------------- | --------------- |
| 1001          | 관리자가 ICD-10 코드를 추가     | 관리자        | 없음     | 생성          | 아니요          |
| 1002          | 관리자가 ICD-10 코드를 삭제     | 관리자        | 없음     | 삭제          | 아니요          |
| 1003          | 관리자가 ICD-10 코드를 편집     | 관리자        | 없음     | 편집          | 아니요          |
| 1004          | 관리자가 ICD-10 코드를 볼       | 관리자        | 없음     | 보기          | 아니요          |
| 1005          | 관리자가 모든 ICD-10 코드를 볼  | 관리자        | 없음     | 보기          | 아니요          |
| 1006          | HCP가 ID로 진단을 검색          | HCP           | 환자     | 보기          | 예              |
| 1007          | HCP가 진료 기록으로 진단을 검색 | HCP           | 환자     | 보기          | 예              |
| 1008          | 환자가 진단을 보기              | 환자          | 없음     | 보기          | 예              |
| 1009          | HCP가 진단을 생성               | HCP           | 환자     | 생성          | 예              |
| 1010          | HCP가 진단을 편집               | HCP           | 환자     | 편집          | 예              |
| 1011          | HCP가 진단을 삭제               | HCP           | 환자     | 삭제          |                 |

## **10.6 데이터 형식**

| 필드        | 형식                                                                                                                                                                                                                                                                            |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ICD-10 코드 | XYZ.AAAA 여기서 X는 대문자 알파벳 문자이고 Y는 숫자입니다. Z는 대문자 글자나 숫자일 수 있습니다. A는 선택 사항이며 숫자나 대문자 문자일 수 있습니다. 코드는 3자 이상이어야 하며 소수점을 제외한 최대 7자 (소수점 제외)까지여야 합니다. 소수점은 3자 이상인 경우에만 나타납니다. |
| 설명        | 최대 250자                                                                                                                                                                                                                                                                      |
| 날짜        | 2 자리 월/2 자리 일/4 자리 년                                                                                                                                                                                                                                                   |
| 노트        | 최대 500자                                                                                                                                                                                                                                                                      |

## **10.7 승인 시나리오**

**시나리오 1:: 24세 환자의 진료 기록에 진단 추가**
HCP Shelly Vang은 iTrust2에 인증합니다. Dr. Vang은 2017년 10월 17일 Central Hospital에서 Nellie Sanderson (1993년 4월 24일 출생)의 새로운 진료 기록을 문서화하기로 선택했습니다. Dr. Vang은 "Nellie는 추위 또는 독감 증상을 경험했습니다"라는 메모를 추가하며 Nellie의 체중을 125 lbs, 키를 62.3 in, 혈압을 110/75 mmHg, 가구 흡연 상태를 "비흡연 가구", 환자 흡연 상태를 "3- 이전 흡연자", HDL을 65, LDL을 102, 그리고 중성 지방을 147로 입력합니다. Dr. Vang은 Nellie에게 ICD-10 코드 J09와 노트 "환자는 처방된 항생제를 복용하고 처음 24시간 동안 다른 사람과의 접촉을 피해야합니다"로 폐렴 진단을 내립니다. 그들 시스템은 진료 기록 세부 정보가 성공적으로 업데이트되었다는 메시지를 표시합니다.

**시나리오 2:: 현재 및 이전 진단 보기.**
환자 Nellie Sanderson은 iTrust2에 인증합니다. 그녀는 과거 진단을 탐색합니다. 그녀는 가장 최근의 진단로 "J09 - 특정 독감 바이러스로 인한 독감"을 볼 수 있습니다. 그녀는 진단의 세부 정보를 볼 수 있으며 진단 날짜 (10/17/2017) 및 진단을 진달한 HCP (Dr. Vang)를 볼 수 있습니다.

**시나리오 3:: iTrust2 시스템에 진단 추가.**
관리자 Al Minister은 iTrust2에 인증합니다. 그는 진단 목록으로 이동하고 새 진단을 추가하려고 선택합니다. 그는 ICD-10 코드로 K35와 설명으로 "급성 맹장염"을 입력합니다. Add Diagnosis를 누른 후, 시스템은 진료 기록 세부 정보가 성공적으로 업데이트되었다는 메시지를 표시합니다.

<aside>
💡 관련 function : diagnosis.java, icd-code와 관련된 코드 모두

</aside>

- icd - code ( 질병과 관련된 질병명 / 증상을 분류해놓은 코드)

# UC11 비밀번호 기능

## 11.1 전제 조건

iTrust2에 사용자가 생성되어 있어야 합니다 [[UC1](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc1)].

## 11.2 주요 과정

사용자는 비밀번호를 변경할 수 있습니다 [S1]. 비밀번호를 잊어버린 경우 이메일 인증을 통해 비밀번호를 재설정할 수 있습니다 [S2].

## 11.3 하위 과정

- [S1] 시스템의 기존 사용자는 현재 비밀번호를 변경할 수 있습니다. 사용자는 현재 비밀번호, 새 비밀번호 및 새 비밀번호 확인(별도의 입력 필드에서 다시 입력)을 입력하도록 요청됩니다. 사용자가 현재 비밀번호를 현재 비밀번호로 변경하려고 시도하면 오류가 발생합니다 [E1]. "새 비밀번호"와 "새 비밀번호 확인" 입력 필드가 다른 경우 오류가 발생합니다 [E2].
- [S2] 시스템의 기존 사용자는 현재 비밀번호를 잊어버린 경우 비밀번호를 재설정할 수 있습니다. 인증되지 않은 사용자는 시스템에서 유효한 사용자 이름을 입력하도록 요청됩니다 [E3]. 이 사용자와 연결된 이메일로 임시 비밀번호와 비밀번호 재설정 링크가 전송됩니다. 입력한 사용자와 연결된 유효한 이메일이 없는 경우 오류가 발생합니다 [E4]. 그런 다음 사용자는 비밀번호를 변경하도록 임시 비밀번호를 현재 비밀번호 필드에 입력하여 비밀번호 변경 페이지로 이동합니다 [S1]. 임시 비밀번호가 만료된 경우 오류 메시지가 표시됩니다 [E5].

## 11.4 대안 과정

- [E1] 사용자가 현재 비밀번호를 현재 비밀번호로 변경하려고 시도하면 "새 비밀번호는 다르게 설정해야 합니다"라는 오류가 발생하고 "새 비밀번호를 입력하세요"라는 메시지가 표시됩니다.
- [E2] 사용자가 "새 비밀번호"와 "새 비밀번호 확인"에 대해 두 가지 다른 값을 입력하면 "입력 필드에서 반복하여 새 비밀번호 확인하세요"라는 오류가 발생합니다.
- [E3] 사용자가 인식되지 않는 사용자 이름을 입력하면 "제공한 사용자 이름으로 사용자를 찾을 수 없습니다"라는 메시지가 표시됩니다.
- [E4] 사용자 계정과 연결된 유효한 이메일이 없으면 "이 계정을 재설정할 수 없습니다. 관리자에게 문의하십시오"라는 오류 메시지가 표시됩니다.
- [E5] 임시 비밀번호가 만료된 경우 사용자에게 "임시 비밀번호가 만료되었습니다. 다른 임시 비밀번호를 요청하십시오"라는 메시지를 표시합니다.

## 11.5 로깅

| 트랜잭션 코드 | 자세한 설명             | 로그인 MID | 보조 MID | 트랜잭션 유형 | 환자 조회 가능 |
| ------------- | ----------------------- | ---------- | -------- | ------------- | -------------- |
| 1100          | 비밀번호 업데이트 실패  | MID        | N/A      | 기타          | 예             |
| 1101          | 비밀번호 업데이트 성공  | MID        | N/A      | 기타          | 예             |
| 1102          | 재설정 요청 이메일 발송 | MID        | N/A      | 기타          | 예             |

## 11.6 데이터 형식

| 필드               | 형식              |
| ------------------ | ----------------- |
| 새 비밀번호        | 6자에서 20자 사이 |
| 새 비밀번호 (확인) | 6자에서 20자 사이 |

## 11.7 승인 시나리오

**시나리오 1:: 비밀번호 변경** 시스템의 기존 사용자가 "비밀번호 변경"을 선택합니다. 그들은 현재 비밀번호를 입력하고 나서 새 비밀번호와 새 비밀번호 확인을 입력합니다. "비밀번호 변경 성공" 메시지가 표시됩니다.

**시나리오 2:: 비밀번호 재설정** 시스템의 기존 사용자가 "비밀번호 재설정"을 선택합니다. 그들은 사용자 이름을 입력하고 나서 임시 비밀번호와 비밀번호 재설정을 위해 사용될 이메일을 받습니다. 그들은 임시 비밀번호를 입력하고 나서 새 비밀번호와 새 비밀번호 확인을 입력합니다. "비밀번호 변경 성공" 메시지가 표시됩니다.

<aside>
💡 관련 function : [email.java](http://email.java) ,  user.java

</aside>

# UC12 HCP 환자 인적 사항 수정

## 12.1 전제 조건

HCP는 iTrust2 시스템의 등록된 사용자입니다 ([UC1](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc1)). HCP는 시스템에서 인증했습니다 ([UC2](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc2)).

## 12.2 주요 과정

HCP는 환자 드롭다운 메뉴에서 Edit Patient를 선택하여 환자의 인적 사항을 편집할 수 있습니다 [S1]. 폼이 렌더링되어 환자를 선택할 수 있으며, [UC4](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc4)에 설명된 모든 인적 사항 필드가 포함됩니다.

## 12.3 하위 과정

- [S1]: HCP는 환자 목록에서 편집할 환자를 선택합니다. 선택한 환자의 현재 인적 사항이 폼에 나타납니다. HCP가 원하는 편집을 수행하고 제출 버튼을 누릅니다. 입력한 데이터가 유효한 경우 메시지가 표시됩니다 [E1]. 편집을 수행한 후 제출하기 전에 다른 환자를 선택하면 경고가 표시됩니다 [E2].

## 12.4 대안 과정

- [E1]: 시스템은 올바르거나 잘못된 필드를 식별하고 HCP에 수정하도록 요청합니다. 데이터는 [Section 4.6](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc4#46-data-format)에서 지정된 요구 사항과 일치해야 합니다.
- [E2]: 저장되지 않은 변경 사항에 대한 경고가 표시됩니다. 동일한 작업을 반복하면 새로운 환자의 데이터가 로드됩니다 [S1].

## 12.5 로깅

| 트랜잭션 코드 | 자세한 설명                    | 로그인 MID | 보조 MID | 트랜잭션 유형 | 환자 조회 가능 |
| ------------- | ------------------------------ | ---------- | -------- | ------------- | -------------- |
| 1200          | HCP에 의해 본 환자 인적 사항   | HCP        | 환자     | 조회          | 예             |
| 1210          | HCP에 의해 환자 인적 사항 편집 | HCP        | 환자     | 편집          | 예             |

## 12.6 데이터 형식

[Section 4.6](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc4#46-data-format)에 나와 있는 데이터 형식과 동일합니다.

| 필드                 | 형식                                                         |
| -------------------- | ------------------------------------------------------------ |
| 이름                 | 최대 20 자의 알파벳 문자 및 기호 -, ', 및 공백               |
| 성                   | 최대 30 자의 알파벳 문자 및 기호 -, ', 및 공백               |
| 선호 이름            | 최대 30 자의 알파벳 문자 및 기호 -, ', 및 공백 (선택 사항)   |
| 어머니 (사용자 이름) | 최대 20 자의 알파벳 문자 및 시스템의 기존 사용자 (선택 사항) |
| 아버지 (사용자 이름) | 최대 20 자의 알파벳 문자 및 시스템의 기존 사용자 (선택 사항) |
| 이메일               | 최대 30 자의 알파벳 숫자 문자 및 기호 ., \_, 및 @            |
| 거리 주소 1          | 최대 50 자의 알파벳 숫자 문자 및 기호: . 및 공백             |
| 거리 주소 2          | 최대 50 자의 알파벳 숫자 문자 및 기호: . 및 공백 (선택 사항) |
| 도시                 | 최대 15 자의 알파벳 문자                                     |
| 주                   | 승인된 2 자리 주 약어                                        |
| 우편 번호            | 5 자리-4 자리 (나중 부분 - 4 자리 - 선택 사항)               |
| 전화                 | 3 자리-3 자리-4 자리                                         |
| 생년월일             | 형식: 2 자리 월/2 자리 일/4 자리 연도                        |
| 인종                 | 백인, 아프리카계 미국인, 히스패닉, 원주민 또는 태평          |

## 12.7 승인 시나리오

**시나리오 1:: 인적 사항 편집** Dr. Shelly Vang은 Jim Bean의 우편번호를 편집해야 합니다. 그녀는 iTrust2에 인증합니다. Dr. Vang은 Edit Patient를 선택합니다. 그녀는 Jim Bean의 인적 사항을 편집하려고 선택합니다. Dr. Vang은 그의 우편번호를 98765로 변경합니다. 제출 버튼을 클릭하면 성공 메시지가 표시됩니다.

**시나리오 2:: 유효하지 않은 인적 사항 편집** Dr. Shelly Vang은 iTrust2에 인증합니다. 그녀는 Edit Patient를 선택합니다. Jim Bean을 편집하도록 선택합니다. Dr. Vang은 우편번호로 "abc"를 입력하고 제출을 클릭합니다. 우편 번호 필드가 유효하지 않다는 오류 메시지가 나타납니다. Dr. Vang은 "12345"를 우편 번호로 입력하여 오류를 수정합니다. 그녀는 제출을 클릭하고 성공 메시지가 나타납니다.

**시나리오 3:: 편집 중에 환자 변경** Dr Shelly Vang은 Nellie Sanderson의 우편 번호를 편집하려고 합니다. 그녀는 iTrust2에 인증하고 Edit Patient를 선택합니다. Jim Bean을 편집하도록 선택합니다. Jim의 우편 번호로 "35678"을 입력합니다. 그런 다음 Nellie Sanderson의 인적 사항을 편집하도록 선택합니다. 변경 사항이 손실될 것임을 나타내는 경고가 나타납니다. 경고 메시지를 계속 선택합니다. Dr. Vang은 Nellie의 우편 번호를 "34567"로 설정하고 제출을 클릭합니다. 성공 메시지가 나타납니다. Dr. Vang은 Jim Bean을 선택합니다. 그의 인적 사항이 우편 번호가 12345로 복원된 상태로 표시됩니다.

<aside>
💡 관련 function : patient.java

</aside>

# UC13 접근 로그 보기

## 13.1 전제 조건

사용자는 iTrust2 의료 기록 시스템 (UC1)의 등록된 사용자입니다. 사용자는 iTrust2 의료 기록 시스템 (UC2)에 로그인했습니다.

## 13.2 주요 과정:

사용자는 iTrust2에 로그인하고 그의 또는 그녀의 액세스 로그의 상위 항목을 볼 수 있습니다 [S1]. 사용자는 별도의 페이지에서 그의 또는 그녀의 액세스 로그를 볼 수 있습니다 [S2]. 그런 다음 사용자는 액세스 로그를 보고자 하는 기간의 시작 및 종료 날짜를 선택할 수 있습니다 [S3]. 결과 목록에는 다음 내용이 포함되어야 합니다.

- 액세스자 이름
- 환자에 상대적인 액세스자 역할 (로그된 이벤트가 환자에 대한 것인 경우)
- 액세스 날짜 및 시간
- [트랜잭션 유형](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v2/blob/master/iTrust2/src/main/java/edu/ncsu/csc/itrust2/models/enums/TransactionType.java)

## 13.3 하위 과정:

- [S1] 사용자가 로그인할 때, 시작 화면에는 최근 열 가지 이벤트가 표시됩니다.
- [S2] 기본적으로 새 페이지로 이동하면 사용자는 모든 항목을 날짜별로 정렬하여 볼 수 있습니다. 가장 최근 액세스부터 표시됩니다.
- [S3] 사용자는 범위 내의 모든 항목을 볼 수 있도록 날짜 범위를 입력할 수 있습니다.

## 13.4 대안 과정:

- [E1] 사용자가 유효하지 않은 날짜를 입력하거나 시작 날짜보다 종료 날짜가 이전인 날짜를 입력합니다. 어떤 이벤트도 표시되지 않으며 사용자는 다른 날짜를 선택할 기회가 있습니다.

## 13.5 로깅

| 트랜잭션 코드 | 자세한 설명      | 주 MID        | 보조 MID | 트랜잭션 유형 | 환자 조회 가능 |
| ------------- | ---------------- | ------------- | -------- | ------------- | -------------- |
| 1301          | 로그 이벤트 조회 | 로그인 사용자 | N/A      | 조회          | 예             |

<aside>
💡 관련 function : logentry.java

</aside>

# UC14 이메일을 통한 사용자 알림

## 14.1 전제 조건:

이메일 알림이 필요한 이벤트가 발생했습니다.

## 14.2 주요 과정:

암호 변경 또는 재설정 [S1], 예약 요청 상태 변경 [S2], 또는 계정 잠금 [S3] 이벤트의 경우 iTrust 사용자에게 이메일 알림이 전송됩니다. 모든 이메일은 iTrust2 애플리케이션 내에서 추적됩니다. 모든 이벤트는 로깅됩니다.

## 14.3 하위 과정:

- [S1] 사용자가 성공적으로 비밀번호를 변경했습니다 (UC11, S1/S2). 사용자에게 비밀번호 변경에 대한 이메일 알림이 사용자에게 MID를 포함하지만 비밀번호를 포함하지 않고 전송됩니다.
- [S2] 예약 요청의 상태가 해당 예약 요청에 관여하는 HCP에 의해 변경되었습니다 (UC6, S3). 예약 상태 변경에 대한 환자에게 이메일 알림이 전송됩니다.
- [S3] 사용자 계정이 너무 많은 로그인 실패로 인해 일시적 또는 영구적으로 잠겼습니다. 사용자에게 잠긴 계정에 대한 이메일 알림이 전송됩니다.

## 14.4 대체 과정:

_없음_

## 14.5 로깅

| 트랜잭션 코드 | 자세한 설명                    | 주 MID        | 보조 MID | 트랜잭션 유형 | 환자 조회 가능 |
| ------------- | ------------------------------ | ------------- | -------- | ------------- | -------------- |
| 1401          | 비밀번호 변경 이메일 알림 전송 | 로그인 사용자 | 없음     | 생성          | 예             |
| 1402          | 예약 요청 이메일 알림 전송     | 로그인 사용자 | 없음     | 생성          | 예             |
| 1403          | 계정 잠금 이메일 알림 전송     | 로그인 사용자 | 없음     | 생성          | 예             |

<aside>
💡 관련 function : email.java

</aside>

# UC15 응급 상황 의료 기록

## 15.1 전제 조건

HCP는 iTrust2 시스템의 등록 사용자입니다 ([UC1](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc1)). HCP는 시스템에 인증했습니다 ([UC2](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc2)).

응급 응답자는 iTrust2 시스템의 등록 사용자입니다 ([UC1](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc1)). 응급 응답자는 시스템에 인증했습니다 ([UC2](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc2)).

## 15.2 주요 흐름

인증된 사용자 (HCP 또는 응급 응답자)는 환자의 이름 [S1] 또는 사용자 이름/MID [S2]를 사용하여 환자의 응급 의료 기록을 검색할 수 있습니다. 일치하는 환자가 화면에 표시됩니다. 인증된 사용자는 환자 목록에서 환자를 선택하고 해당 환자의 응급 의료 기록 페이지를 열기 위해 "선택" 버튼을 클릭할 수 있습니다 [S3].

## 15.3 하위 흐름

- [S1]: 승인된 사용자는 검색 상자에 원하는 환자의 이름의 첫 번째 및/또는 마지막 이름 (또는 둘 다에 대한 올바른 하위 문자열)을 입력합니다[E1][E2]. 지정한 하위 문자열(들)을 포함하는 이름을 가진 환자가 표시됩니다.
- [S2]: 승인된 사용자는 검색 상자에 원하는 환자의 MID(사용자 이름) 또는 해당 MID의 하위 문자열을 올바르게 입력합니다[E1][E3]. MID/MID 하위 문자열과 일치하는 환자/들이 표시됩니다.
- [S3]: 승인된 사용자는 볼 환자를 선택합니다. 환자의 응급 의료 기록 페이지가 열립니다. 환자의 이름, 연령, 출생일, 성별 및 혈액형이 깔끔하게 표시되며, 그 후 60일 이내의 단기 진단에 대한 모든 진단 코드 목록(최신 순으로 정렬)이 표시됩니다. 마지막으로, 환자가 지난 90일 동안 받은 모든 처방전 목록이 표시됩니다(최신 순으로 정렬).

## 15.4 대체 흐름

- [E1]: 입력이 15.6에서 지정한 적절한 데이터 형식과 일치하지 않는 경우 사용자는 표시되지 않습니다.
- [E2]: 사용자 이름의 일부이지만 정확해야 합니다. "Ale"은 "Alex"와 일치하겠지만 "Ael"은 일치하지 않을 것입니다.
- [E3]: 사용자 이름이나 해당 MID의 일치하는 사용자가 없거나 제공된 MID 하위 문자열이 기존 MID에서 찾을 수 없는 경우 사용자는 표시되지 않습니다.

## 15.5 로깅

| 트랜잭션 코드 | 자세한 설명                                  | 로그인된 MID | 보조 MID | 트랜잭션 유형 | 환자 조회 가능 |
| ------------- | -------------------------------------------- | ------------ | -------- | ------------- | -------------- |
| 1501          | HCP가 환자의 응급 의료 기록을 봅니다         | HCP          | 환자     | 뷰            | 예             |
| 1502          | 응급 응답자가 환자의 응급 의료 기록을 봅니다 | 응급 응답자  | 환자     | 뷰            | 예             |

## 15.6 데이터 형식

| 필드     | 형식                                              |
| -------- | ------------------------------------------------- |
| 이름     | 최대 20자의 알파벳 문자 및 기호 -,", 공백 포함    |
| 성       | 최대 30자의 알파벳 문자 및 기호 -,", 공백 포함    |
| 환자 MID | 6자에서 20자 사이의 알파벳 문자 및 기호 - 또는 \_ |

## 15.7 승인 시나리오

**시나리오 1:: HCP가 이름을 사용하여 환자의 응급 의료 기록을 검색**

HCP Shelly Vang은 iTrust2에 인증합니다. 그녀는 응급 의료 기록 검색 페이지로 이동하고 환자 Siegwardof Catarina의 이름을 검색하고 검색을 클릭합니다. 일치하는 환자 중에 Siegwardof Catarina가 나타나며, 그를 선택하고 "선택" 버튼을 클릭합니다. Siegwardof Catarina의 응급 의료 기록이 위의 [S3]에 설명한대로 표시됩니다.

**시나리오 2:: 응급 응답자가 MID를 사용하여 환자의 응급 의료 기록을 검색**

응급 응답자 Knight Solaire은 iTrust2에 인증합니다. 그는 응급 의료 기록 검색 페이지로 이동하고 사용자 이름 "siegofc"를 사용자 이름 검색 상자에 입력하고 검색 버튼을 클릭합니다. 일치하는 환자 중에 Siegwardof Catarina가 나타나며, 그를 선택하고 "선택" 버튼을 클릭합니다. Siegwardof Catarina의 응급 의료 기록이 위의 [S3]에 설명한대로 표시됩니다.

**시나리오 3:: HCP가 사용자 이름 하위 문자열을 사용하여 여러 환자를 선택**

HCP Shelly Vang은 iTrust2에 인증합니다. 그녀는 응급 의료 기록 검색 페이지로 이동하고 사용자 이름 "fourking"을 검색합니다. 검색을 클릭하면 'fourking1', 'fourking2', 'fourking3' 및 'fourking4' 사용자가 나타납니다. 그녀는 'fourking1'을 선택하고 King One의 응급 의료 기록이 표시됩니다.

<aside>
💡 구현해야하는 functionality : 응급 의료 기록 format, 응급 의료기록 .java   →  새로운 것을 만드는건 만드는건데, 이게 기존 환자의 진료기록과 또 엮어야함. 업데이트도 같은 형식으로 해줘야함 / uc7 의 진료기록과 비슷할듯. / 응급의료기록 페이지가 따로 있는 것 같은데, 응급 의료 기록에서 진단 페이지는 diagnosis.java를 그대로 사용해도되는지, 아니면 새롭게 응급진단을 새로 만들어야하는지./ 응급 의료기록은 진료기록에 추가하는 것인지/

</aside>

# UC16 개인 대리인

## 16.1 전제 조건

iTrust2 사용자가 iTrust2에 로그인한 경우 ([UC2](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc2)). 환자로서 다른 환자가 iTrust2 의료 기록 시스템의 등록 사용자입니다 [UC1]. 환자는 iTrust2 의료 기록 시스템에 인증했습니다 ([UC1](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc1))..

HCP는 iTrust2 의료 기록 시스템의 등록 사용자입니다 ([UC1](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc1)). HCP는 iTrust2 의료 기록 시스템에 인증했습니다 ([UC2](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc2)).

## 16.2 주요 흐름

환자는 자신이 PR로 지정한 사람 목록과 PR로 지정한 사람의 목록을 볼 수 있습니다[S1]. 환자는 다른 사용자를 자신의 개인 대리인으로 지정하거나 지정 해제 할 수 있으며, 누군가의 개인 대리인으로 지정 해제할 수 있습니다[S2][S3].

HCP는 다른 환자를 다른 환자의 개인 대리인으로 지정하고, 할당된 대리인 및 수익자를 볼 수 있습니다[S3].

## 16.3 하위 흐름

- [S1]: 환자는 개인 대리인 페이지로 이동하고 자신을 대표하는 대리인을 볼 수 있습니다.
- [S2]: 환자는 "대리인 지정" 옵션을 선택하고 다른 환자의 이름 또는 MID의 일부 또는 전체를 입력할 수 있습니다. 이름 또는 MID와 일치하는 항목이 포함된 환자 목록이 표시됩니다. 사용자는 목록에서 환자를 선택하고 "대리인 지정 확인"을 클릭할 수 있습니다. 환자가 존재하지 않으면 오류 메시지가 표시됩니다[E1]. 그렇지 않으면 성공 메시지가 표시되며 선택한 PR이 개인 대리인 목록에 표시됩니다. 환자는 "대리인 지정 해제"를 클릭하고 PR을 선택하고 PR을 제거할 수 있습니다. 확인 메시지가 표시되고 이름이 PR 목록에서 제거됩니다.
- [S3]: 환자가 PR로 지정되면 환자는 자신이 PR로 지정된 환자 목록을 볼 수 있습니다. 특정 환자에 대해 PR로 지정되기를 원치 않는 경우 목록에서 이름을 선택하고 자신을 지정 해제할 수 있습니다. 성공적으로 완료되면 확인 메시지가 표시됩니다.
- [S4]: HCP는 환자를 대리인으로 지정할 수 있습니다. 각 환자에 대해 그들의 대리인 목록을 볼 수 있으며 해당 환자가 대리인으로 지정한 사람을 볼 수 있습니다.

## 16.4 대체 흐름

- [E1]: 사용자가 찾을 수 없거나 작업이 성공적으로 완료되지 않았음을 나타내는 오류 메시지가 표시됩니다. 사용자는 다시 시도하기 위해 양식으로 돌아갑니다.

## 16.5 로깅

| 트랜잭션 코드 | 자세한 설명                    | 로그인된 MID  | 보조 MID      | 트랜잭션 유형 | 환자 조회 가능 |
| ------------- | ------------------------------ | ------------- | ------------- | ------------- | -------------- |
| 1601          | 대리인 지정                    | 환자          | 환자 (대리인) | 보기          | 예             |
| 1602          | HCP가 누군가를 대리인으로 지정 | HCP           | 환자 (대리인) | 보기          | 예             |
| 1603          | 대리인 지정 해제               | 환자          | 환자 (대리인) | 보기          | 예             |
| 1604          | 대리인으로 지정 해제           | 환자 (대리인) | 환자          | 보기          | 예             |

## 16.6 승인 시나리오

시나리오 1: 환자를 대리인으로 추가</b>::환자 Billy Bob이 iTrust2 시스템에 로그인합니다. Billy는 PR 선택 페이지로 이동하고 환자 "Jill Bob"을 PR로 추가합니다. 확인 메시지가 표시되고 Jill Bob이 Billy의 PR 목록에 나타납니다.

시나리오 2: 할당된 환자의 의료 기록 보기</b> (전제 조건: Jill이 로그인함)::Jill은 iTrust2 시스템에 로그인합니다. Jill은 할당 된 환자 목록으로 이동하고 Billy Bob을 선택합니다. Jill은 Billy의 액세스 로그, 의료 기록, 진단 및 약속 페이지로 이동할 수 있는 페이지로 이동합니다.

시나리오 3: 대리인으로 지정을 해제하십시오 (전제 조건: 시나리오 2)</b>::Jill Bob은 할당된 환자 목록으로 돌아가고 Billy를 선택한 다음 그를 환자로 지정 해제합니다. Jill은 확인 메시지를 수신하고 Billy의 이름이 할당된 환자 목록에서 제거되며 더 이상 Billy의 의료 기록에 액세스 할 수 없습니다.

<aside>
💡 구현해야하는 functionality : 아마 patient.java에 PR을 추가하고 변경할 수 있도록 하면될듯 / 거의 프론트 구현 기능이 많아보임.

</aside>

# UC19 식단 일지

## 19.1 전제 조건

iTrust2 사용자가 환자 또는 HCP로 iTrust2에 인증되었습니다([UC2](https://github.ncsu.edu/engr-csc326-staff/iTrust2-v1/wiki/uc2)).

## 19.2 주요 Flow

어떤 환자도 식단 일지를 볼 수 있거나 새로운 일지 항목을 추가할 수 있습니다. 환자가 식단 일지를 보기로 선택하면, 모든 일지 항목이 [S1]에 포함된 정보로 표시되며 가장 최근 항목(식단 일지 항목의 작성일 기준)부터 표시되며 [S2][E1]를 사용하여 합계를 계산합니다. 환자가 새로운 식단 일지 항목을 추가하기로 선택하면, 양식에 필요한 정보를 입력합니다 [S1]. 환자는 양식을 제출합니다 [E2] 및 식단 일지를 보는 페이지로 이동합니다.

어떤 HCP도 iTrust2 시스템의 환자에 대한 식단 일지 항목을 보기 (작성 불가) 위해서 사용할 수 있습니다. HCP는 환자를 검색하고 환자를 선택한 후, 환자가 볼 것과 정확히 동일한 방식으로 식단 일지가 표시됩니다 [S2][E1].

## 19.3 서브플로우

- [S1] 식단 일지 항목은 Section 19.6에서 설명된 다음 정보를 가지고 있습니다:
  - 날짜 (현재 날짜가 기본값)
  - 식사 유형
  - 동일한 식사 유형에 대한 여러 항목을 가질 수 있음
  - 음식 항목의 이름
  - 섭취한 서빙 수
  - 서빙 당 칼로리
  - 서빙 당 지방 그램
  - 서빙 당 나트륨 밀리그램
  - 서빙 당 탄수화물 그램
  - 서빙 당 당류 그램
  - 서빙 당 섬유질 그램
  - 서빙 당 단백질 그램
- [S2] 식단 일지의 각 날마다, 5번부터 11번까지 행에 대한 합계가 각각 계산됩니다.

## 19.4 대체 Flow

- [E1] 환자의 식단 일지 항목이 없는 경우, "없음" 메시지가 표시됩니다.
- [E2] 잘못된 입력이 플래그가 표시되며 해당 입력에 적합한 오류 메시지가 출력됩니다.

## 19.5 로깅

| 거래 코드 | 상세한 설명                   | 로그인한 MID | 보조 MID | 거래 유형 | 환자가 볼 수 있는가? |
| --------- | ----------------------------- | ------------ | -------- | --------- | -------------------- |
| 1901      | 식단 일지 항목 생성           | 환자         | -        | 생성      | 네                   |
| 1902      | 환자가 식단 일지 항목을 볼 때 | 환자         | -        | 보기      | 네                   |
| 1903      | HCP가 식단 일지 항목을 볼 때  | HCP          | 환자     | 보기      | 네                   |

## 19.6 데이터 형식

| 필드                    | 형식                                                 |
| ----------------------- | ---------------------------------------------------- |
| 날짜                    | mm/dd/yyyy, 현재 날짜나 과거 날짜로 제한됩니다. 필수 |
| 식사 유형               | "아침", "점심", "저녁" 또는 "간식" 중 하나. 필수     |
| 음식 이름               | null 또는 빈 문자열 아님. 필수                       |
| 섭취한 서빙 수          | 양수. 필수                                           |
| 서빙 당 칼로리          | 0 이상의 숫자. 필수                                  |
| 서빙 당 지방 그램       | 0 이상의 숫자. 필수                                  |
| 서빙 당 나트륨 밀리그램 | 0 이상의 숫자. 필수                                  |
| 서빙 당 탄수화물 그램   | 0 이상의 숫자. 필수                                  |
| 서빙 당 당류 그램       | 0 이상의 숫자. 필수                                  |
| 서빙 당 섬유질 그램     | 0 이상의 숫자. 필수                                  |
| 서빙 당 단백질 그램     | 0 이상의 숫자. 필수                                  |

<aside>
💡 구현해야하는 functionality : 식단일지 format, [식단일지.java](http://식단일지.java) 등등 / [personal.java](http://personal.java) 를 참고하면 거의 똑같을 듯/ 식단정보를 환자 개인이랑 연결해야함

</aside>

# UC21 안과 전문의 예약

## 21.1 전제 조건

iTrust2 사용자는 안과 전문의 또는 안과의사로 iTrust2에 로그인된 상태여야하며 시스템에 해당 환자가 존재해야 합니다.

## 21.2 주요 Flow

안과 전문의 및 안과의사 HCP는 진료를 안과 건강 진단으로 표시할 수 있습니다. 이 방문은 **선택적으**로 기본 건강 지표를 지원합니다 [S1].

## 21.3 서브플로우

- [S1] 안과 전문의 또는 안과의사 HCP가 진료 개요를 제출할 때 다음 안과 건강 정보를 입력할 것입니다 [E1]:
  - 오른쪽 눈 (OD) 및 왼쪽 눈 (OS)의 시력 검사 결과, 정수 값으로 20에서 200 사이.
  - 오른쪽 눈 (OD) 및 왼쪽 눈 (OS)의 구의 반지름, 소수점 두 자리까지의 부동 소수점 숫자로 입력할 수 있습니다.
    그리고 선택적으로:
  - 오른쪽 눈 (OD) 및 왼쪽 눈 (OS)의 원통 렌즈, 소수점 두 자리까지의 부동 소수점 숫자로 입력할 수 있습니다.
  - 원통 렌즈가 입력된 경우 오른쪽 눈 (OD) 및 왼쪽 눈 (OS)의 축을 1에서 180 도 사이로 입력해야 합니다.
  - 일반 방문 메모 (최대 500 자)
  - 다음 목록에서 질병: 백내장, 연령 관련 황반변성, 안질몸, 녹내장.
- [S2] 진료 후, 안과 전문의 및 안과의사 HCP는 방문의 진단을 보거나 편집할 수 있습니다.

## 21.4 대체 Flow

- [E1] HCP가 잘못된 시력, 구의 반지름, 축, 원통값을 입력하려고 하면 사용자는 해당 값을 사용할 수 없다는 메시지를 받게 됩니다.

## 21.5 로깅

| 거래 코드 | 상세 설명                                             | 로그인한 MID | 보조 MID     | 거래 유형 | 환자가 볼 수 있는가? |
| --------- | ----------------------------------------------------- | ------------ | ------------ | --------- | -------------------- |
| 2100      | 안과 전문의 진료 예약 제출을 위한 로깅.               | HCP의 MID    | 사용자의 MID | 생성      | 아니요               |
| 2102      | 안과 전문의 진료 예약을 편집하는 데 사용되는 로깅.    | HCP의 MID    | 사용자의 MID | 편집      | 아니요               |
| 2101      | 의사가 안과 전문의 진료 예약을 보는 데 사용되는 로깅. | HCP의 MID    | 사용자의 MID | 보기      | 아니요               |
| 2110      | 환자가 안과 전문의 진료 예약을 보는 데 사용되는 로깅. | 환자의 MID   | 없음         | 보기      | 아니요               |
| 2111      | 안과 전문의 진료 예약을 삭제하는 데 사용되는 로깅.    | 환자의 MID   | 없음         | 보기      | 아니요               |

## 21.6 데이터 형식

| 필드           | 형식                                                         |
| -------------- | ------------------------------------------------------------ |
| 시력 검사 결과 | 20에서 200 사이의 두 3자리 정수. 필수                        |
| 구의 반지름    | 두 자리까지의 양수 또는 음수 부동 소수점 숫자. 필수          |
| 원통 렌즈      | 두 자리까지의 양수 또는 음수 부동 소수점 숫자.               |
| 축             | 1에서 180 사이의 정수. 원통 렌즈가 있는 경우 필수            |
| 메모           | 최대 500 문자까지의 일반 진료 메모.                          |
| 진단           | 다음 중 하나: 백내장, 연령 관련 황반변성, 안질몸 또는 녹내장 |

## 21.7 수락 시나리오

**시나리오 1:** iTrust2 시스템에서 안과 전문의 진료를 승인합니다.

안과 전문의 HCP가 iTrust2에 인증합니다. "안과 전문의 진료 및 요청 보기" 페이지로 이동하고 진료를 선택한 다음 드롭다운 메뉴에서 "승인"을 선택합니다. 진료는 안과 전문의 진료 열로 이동해야 합니다.

**시나리오 2:** iTrust2 시스템에서 안과 전문의 진료를 거부합니다.

안과 전문의 HCP가 iTrust2에 인증합니다. "안과 전문의 진료 및 요청 보기" 페이지로 이동하고 진료를 선택한 다음 드롭다운 메뉴에서 "거부"를 선택합니다. 진료는 안과 전문의 진료 요청 열에서 제거되어야 합니다.

**시나리오 3:** iTrust2 시스템에서 정확한 날짜의 안과 전문의 진료를 진행합니다.

환자가 안과 전문의 진료 요청을 제출합니다. 안과 전문의 HCP가 iTrust2에 인증합니다. "안과 전문의 진료 및 요청 보기" 페이지로 이동하면 제출된 진

료가 환자가 지정한 정확한 날짜와 시간으로 표시됩니다.

<aside>
💡 구현해야하는 functionality : 안과 전문의 진료예약 ( [appointmentrequest.java](http://appointmentrequest.java) 랑비슷할듯) , request 어쩌구를 건들이는건지 / 아니면 따로 안과라는 것에 대한것을 구현하는건지? (아마 후자일듯) /

</aside>

# UC22 안과 수술

## 22.1 전제 조건

iTrust2 사용자는 환자, HCP 또는 안과 의사로 iTrust2에 로그인된 상태여야 합니다.

## 22.2 주요 Flow

환자, HCP 및 안과 의사는 문서화된 안과 수술 진료를 볼 수 있습니다 [S1].

안과 의사 HCP는 안과 수술 진료를 문서화할 수 있으며 수술에 대한 세부 정보를 제공합니다 [S3]. 안과 의사는 안과 수술 진료를 문서화할 때 선택적으로 기본 건강 지표를 포함할 수 있습니다.

안과 의사는 이전의 안과 수술 진료에 대한 정보를 편집할 수 있습니다 [S4]. 다른 사용자는 방문을 편집할 수 없습니다.

## 22.3 서브플로우

- [S1]: 환자는 안과 수술 진료를 볼 수 있습니다. 환자가 보호자 HCP가 수술 진료를 기록한 모든 정보를 볼 수 있습니다. 그들은 정보를 편집할 수 없습니다.
- [S3]: 개별 안과 의사 수술 예약 항목에는 섹션 22.6에 설명된 다음과 같은 정보가 포함되어 있습니다.
  - 날짜 (기본값은 현재 날짜)
  - 시력 검사 결과 (왼쪽 눈 및 오른쪽 눈)
  - 구 (왼쪽 눈 및 오른쪽 눈)
  - 원통 (왼쪽 눈 및 오른쪽 눈)
  - 축 (왼쪽 눈 및 오른쪽 눈)
  - 수술 유형
  - 메모
- [S4]: 안과 의사는 환자, 방문 날짜 및 시간을 기록하여 기존의 안과 수술 진료를 편집하기로 선택합니다. 그들은 양식을 작성하고 "수술 진료 수정"을 누르면 수술이 올바르게 입력되었다는 메시지가 표시됩니다.

## 22.4 대체 Flow

- [E1] 시스템은 안과 의사에게 필수 데이터 필드의 형식을 올바르게 수정하도록 요구하며 해당 데이터 필드의 입력이 진료 데이터 또는 다른 수집된 데이터에 지정된 것과 일치하지 않을 때 발생합니다 [S3].

## 22.5 로깅

| 거래 코드 | 상세 설명                     | 로그인한 MID  | 보조 MID | 거래 유형 | 환자가 볼 수 있는가? |
| --------- | ----------------------------- | ------------- | -------- | --------- | -------------------- |
| 2201      | 안과 의사가 수술을 추가함     | 안과 의사 HCP | 환자     | 생성      | 예                   |
| 2202      | 안과 의사가 수술을 수정함     | 안과 의사 HCP | 환자     | 편집      | 예                   |
| 2203      | 안과 의사가 수술을 볼 수 있음 | 안과 의사 HCP |          | 보기      | 예                   |
| 2204      | 환자가 수술을 볼 수 있음      | 환자          |          | 보기      | 예                   |

## 22.6 데이터 형식

| 필드           | 형식                                                         |
| -------------- | ------------------------------------------------------------ |
| 날짜           | mm/dd/yyyy. 필수                                             |
| 시력 검사 결과 | 20에서 200 사이의 두 3자리 정수. 필수                        |
| 구             | 두 자리까지의 양수 또는 음수 부동 소수점 숫자. 필수          |
| 원통           | 두 자리까지의 양수 또는 음수 부동 소수점 숫자.               |
| 축             | 1에서 180까지의 정수. Cylinder가 존재하는 경우 필수          |
| 수술 유형      | “백내장 수술”, “레이저 수술”, 또는 “굴절 수술” 중 하나. 필수 |
| 메모           | 최대 500자                                                   |

## 22.7 수락 시나리오

**시나리오 1:** 안과 의사 HCP가 안과 수술 진료 예약을 추가합니다. 안과 의사 HCP가 iTrust2에 인증합니다. 편집 진료 페이지로 이동하고 새 진료를 만들기를 선택합니다.

안과 의사는 "방문 유형"에서 "안과 수술"을 선택합니다. 그런 다음 날짜로 "10/31/2018", 환자로 "AliceThirteen", 시력 검사 결과로 "50", 구로 "-50.0", 원통으로 "-50.0", 축으로 "90", "백내장 수술"로 수술 유형 및 메모로 "이것은 메모입니다"를 입력합니다. "진료 정보 업데이트" 버튼을 클릭하면 페이지에 "진료가 성공적으로 추가되었습니다"라는 메시지가 표시됩니다.

**시나리오 2:** 안과 의사 HCP가 안과 수술 진료 예약을 편집합니다. 안과 의사 HCP가 iTrust2에 인증합니다. 편집 진료 페이지로 이동하고 진료 편집을 선택합니다.

안과 의사는 이전에 생성한 안과 수술 진료 예약을 선택합니다. 시력 검사 결과로 "50", 구로 "-50.0", 원통

으로 "-50.0", 축으로 "90", 수술 유형으로 "백내장 수술" 및 메모로 "이것은 메모입니다"를 입력합니다. "진료 정보 업데이트" 버튼을 클릭하면 페이지에 "진료가 성공적으로 편집되었습니다"라는 메시지가 표시됩니다.

**시나리오 3:** 환자가 이전 안과 수술 진료 예약을 볼 수 있습니다. 환자가 iTrust2에 인증합니다. 이전 진료 방문 페이지로 이동합니다. 환자가 안과 수술로 표시되는 이전 진료 방문을 선택하고 보기 버튼을 클릭합니다. 환자는 선택한 안과 수술 진료 예약과 관련된 모든 정보가 표시되는 페이지로 이동합니다.

<aside>
💡 구현해야하는 functionality: 수술 예약항목, 수술진료 예약,  수술 진료 항목→ 이게 기존에 있던 diagnosis 에서 안과수술이라는 section으로 추가하고, 아마 기존에 있는 diagnosis 에서 안과항목에 대한 항목을 추가하는건지,,, 아니면 아예 안과를 따로 만드는건지가 의문임

</aside>
